
<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
  <meta charset="UTF-8" />
  <title>Dá»‹ch Viá»‡t â†” ÃŠ-Ä‘Ãª - Final v3</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.5/dist/tesseract.min.js"></script>
  <script>tailwind.config = { darkMode: 'class' };</script>
  <style>
    @font-face {
      font-family: 'CharisSIL';
      src: url('https://cdn.jsdelivr.net/gh/silnrsi/font-charis@main/web/CharisSIL-Regular.woff2') format('woff2');
    }
    body { font-family: 'CharisSIL', serif; }
  </style>
</head>
<body class="dark:bg-gray-900 dark:text-white text-black bg-white p-4">
  <div class="max-w-4xl mx-auto space-y-6">

    <h1 class="text-2xl font-bold">Dá»‹ch Viá»‡t â†” ÃŠâ€‘Ä‘Ãª</h1>

    <!-- Input & Translation -->
    <input id="inputText" placeholder="Nháº­p tá»«..." class="w-full p-2 bg-gray-100 dark:bg-gray-800 rounded" />
    <button onclick="translate()" class="px-4 py-2 bg-blue-600 text-white rounded">Dá»‹ch</button>
    <textarea id="outputText" rows="2" class="w-full p-2 bg-gray-200 dark:bg-gray-700 rounded" readonly></textarea>

    <!-- OCR -->
    <div>
      <h2 class="font-semibold">ğŸ“· OCR Äa áº¢nh</h2>
      <input type="file" multiple accept="image/*" onchange="handleOCR(this.files)" />
      <pre id="ocrOutput" class="bg-gray-100 dark:bg-gray-800 p-2 rounded mt-2 text-sm whitespace-pre-wrap"></pre>
    </div>

    <!-- Flashcard -->
    <div>
      <h2 class="font-semibold">ğŸ´ Flashcard luyá»‡n tá»«</h2>
      <button onclick="showFlashcard()" class="text-sm bg-green-600 text-white px-3 py-1 rounded">Luyá»‡n táº­p</button>
      <div id="flashcard" class="mt-2 p-2 border rounded dark:border-gray-700"></div>
    </div>

    <!-- AI MÃ´ phá»ng -->
    <div>
      <h2 class="font-semibold">ğŸ§  AI Giáº£i thÃ­ch (mÃ´ phá»ng)</h2>
      <button onclick="mockAIExplain()" class="text-sm bg-purple-600 text-white px-3 py-1 rounded">Giáº£i thÃ­ch tá»«</button>
      <div id="aiExplain" class="mt-2 text-sm italic"></div>
    </div>

    <!-- TÃ¡c giáº£ -->
    <p class="text-xs pt-6 text-gray-400">á»¨ng dá»¥ng Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi <strong>Tháº¿ Báº±ng</strong> Â© 2025</p>
  </div>

  <script>
    const dictEV = { "abÄƒ": "cha", "abÄƒn": "xoa dá»‹u", "amÃ¢o": "lá»­a" };
    const dictVE = { "cha": "abÄƒ", "xoa dá»‹u": "abÄƒn", "lá»­a": "amÃ¢o" };

    function translate() {
      const input = document.getElementById("inputText").value.trim().toLowerCase();
      const output = dictEV[input] || dictVE[input] || `(tra máº¡ng: ${input})`;
      document.getElementById("outputText").value = output;
    }

    function handleOCR(files) {
      document.getElementById("ocrOutput").textContent = "Äang xá»­ lÃ½ áº£nh...";
      let results = [];
      Array.from(files).forEach((file, index) => {
        Tesseract.recognize(file, 'vie', {
          logger: m => console.log(`[OCR ${index + 1}]`, m)
        }).then(({ data: { text } }) => {
          results.push(`ğŸ–¼ áº¢nh ${index + 1}:
${text.trim()}`);
          document.getElementById("ocrOutput").textContent = results.join("\n\n");
        });
      });
    }

    function showFlashcard() {
      const keys = Object.keys(dictVE);
      const random = keys[Math.floor(Math.random() * keys.length)];
      document.getElementById("flashcard").innerText = `ğŸ‘‰ ${random} = ${dictVE[random]}`;
    }

    function mockAIExplain() {
      const word = document.getElementById("inputText").value.trim().toLowerCase();
      const meaning = dictEV[word] || dictVE[word];
      const explanation = meaning
        ? `Tá»« "${word}" cÃ³ nghÄ©a lÃ  "${meaning}". ÄÃ¢y lÃ  má»™t tá»« Ä‘Æ¡n giáº£n trong tiáº¿ng ÃŠ-Ä‘Ãª/Viá»‡t.`
        : `KhÃ´ng tÃ¬m tháº¥y tá»« "${word}". Vui lÃ²ng kiá»ƒm tra láº¡i hoáº·c tra trÃªn internet.`;
      document.getElementById("aiExplain").innerText = explanation;
    }
  </script>
</body>
</html>
